execute as @s run function keypad:util/get_cardinal_direction
execute if score $cardinal_direction keypad.main matches 0 at @s run setblock ~ ~ ~ minecraft:barrel[facing=north,open=false]{CustomName:'{"extra":[{"translate":"space.-8"},{"color":"white","font":"keypad:keypad_ui","text":"睷"}],"text":""}',Items:[{Slot:2b,id:"minecraft:clock",Count:1b,tag:{keypad_id:1,CustomModelData:1,keypad_item:1,display:{Name:'{"text":"1","italic":false}'}}},{Slot:3b,id:"minecraft:clock",Count:1b,tag:{keypad_id:2,CustomModelData:2,keypad_item:1,display:{Name:'{"text":"2","italic":false}'}}},{Slot:4b,id:"minecraft:clock",Count:1b,tag:{keypad_id:3,CustomModelData:3,keypad_item:1,display:{Name:'{"text":"3","italic":false}'}}},{Slot:6b,id:"minecraft:clock",Count:1b,tag:{keypad_id:12,CustomModelData:12,keypad_item:1,display:{Name:'{"text":"Submit","italic":false}'}}},{Slot:10b,id:"minecraft:clock",Count:1b,tag:{keypad_id:0,CustomModelData:0,keypad_item:1,display:{Name:'{"text":"0","italic":false}'}}},{Slot:11b,id:"minecraft:clock",Count:1b,tag:{keypad_id:4,CustomModelData:4,keypad_item:1,display:{Name:'{"text":"4","italic":false}'}}},{Slot:12b,id:"minecraft:clock",Count:1b,tag:{keypad_id:5,CustomModelData:5,keypad_item:1,display:{Name:'{"text":"5","italic":false}'}}},{Slot:13b,id:"minecraft:clock",Count:1b,tag:{keypad_id:6,CustomModelData:6,keypad_item:1,display:{Name:'{"text":"6","italic":false}'}}},{Slot:15b,id:"minecraft:clock",Count:1b,tag:{keypad_id:11,CustomModelData:11,keypad_item:1,display:{Name:'{"text":"Remove","italic":false}'}}},{Slot:20b,id:"minecraft:clock",Count:1b,tag:{keypad_id:7,CustomModelData:7,keypad_item:1,display:{Name:'{"text":"7","italic":false}'}}},{Slot:21b,id:"minecraft:clock",Count:1b,tag:{keypad_id:8,CustomModelData:8,keypad_item:1,display:{Name:'{"text":"8","italic":false}'}}},{Slot:22b,id:"minecraft:clock",Count:1b,tag:{keypad_id:9,CustomModelData:9,keypad_item:1,display:{Name:'{"text":"9","italic":false}'}}},{Slot:24b,id:"minecraft:clock",Count:1b,tag:{keypad_id:10,CustomModelData:10,keypad_item:1,display:{Name:'{"text":"Clear","italic":false}'}}}]}
execute if score $cardinal_direction keypad.main matches 1 at @s run setblock ~ ~ ~ minecraft:barrel[facing=east,open=false]{CustomName:'{"extra":[{"translate":"space.-8"},{"color":"white","font":"keypad:keypad_ui","text":"睷"}],"text":""}',Items:[{Slot:2b,id:"minecraft:clock",Count:1b,tag:{keypad_id:1,CustomModelData:1,keypad_item:1,display:{Name:'{"text":"1","italic":false}'}}},{Slot:3b,id:"minecraft:clock",Count:1b,tag:{keypad_id:2,CustomModelData:2,keypad_item:1,display:{Name:'{"text":"2","italic":false}'}}},{Slot:4b,id:"minecraft:clock",Count:1b,tag:{keypad_id:3,CustomModelData:3,keypad_item:1,display:{Name:'{"text":"3","italic":false}'}}},{Slot:6b,id:"minecraft:clock",Count:1b,tag:{keypad_id:12,CustomModelData:12,keypad_item:1,display:{Name:'{"text":"Submit","italic":false}'}}},{Slot:10b,id:"minecraft:clock",Count:1b,tag:{keypad_id:0,CustomModelData:0,keypad_item:1,display:{Name:'{"text":"0","italic":false}'}}},{Slot:11b,id:"minecraft:clock",Count:1b,tag:{keypad_id:4,CustomModelData:4,keypad_item:1,display:{Name:'{"text":"4","italic":false}'}}},{Slot:12b,id:"minecraft:clock",Count:1b,tag:{keypad_id:5,CustomModelData:5,keypad_item:1,display:{Name:'{"text":"5","italic":false}'}}},{Slot:13b,id:"minecraft:clock",Count:1b,tag:{keypad_id:6,CustomModelData:6,keypad_item:1,display:{Name:'{"text":"6","italic":false}'}}},{Slot:15b,id:"minecraft:clock",Count:1b,tag:{keypad_id:11,CustomModelData:11,keypad_item:1,display:{Name:'{"text":"Remove","italic":false}'}}},{Slot:20b,id:"minecraft:clock",Count:1b,tag:{keypad_id:7,CustomModelData:7,keypad_item:1,display:{Name:'{"text":"7","italic":false}'}}},{Slot:21b,id:"minecraft:clock",Count:1b,tag:{keypad_id:8,CustomModelData:8,keypad_item:1,display:{Name:'{"text":"8","italic":false}'}}},{Slot:22b,id:"minecraft:clock",Count:1b,tag:{keypad_id:9,CustomModelData:9,keypad_item:1,display:{Name:'{"text":"9","italic":false}'}}},{Slot:24b,id:"minecraft:clock",Count:1b,tag:{keypad_id:10,CustomModelData:10,keypad_item:1,display:{Name:'{"text":"Clear","italic":false}'}}}]}
execute if score $cardinal_direction keypad.main matches 2 at @s run setblock ~ ~ ~ minecraft:barrel[facing=south,open=false]{CustomName:'{"extra":[{"translate":"space.-8"},{"color":"white","font":"keypad:keypad_ui","text":"睷"}],"text":""}',Items:[{Slot:2b,id:"minecraft:clock",Count:1b,tag:{keypad_id:1,CustomModelData:1,keypad_item:1,display:{Name:'{"text":"1","italic":false}'}}},{Slot:3b,id:"minecraft:clock",Count:1b,tag:{keypad_id:2,CustomModelData:2,keypad_item:1,display:{Name:'{"text":"2","italic":false}'}}},{Slot:4b,id:"minecraft:clock",Count:1b,tag:{keypad_id:3,CustomModelData:3,keypad_item:1,display:{Name:'{"text":"3","italic":false}'}}},{Slot:6b,id:"minecraft:clock",Count:1b,tag:{keypad_id:12,CustomModelData:12,keypad_item:1,display:{Name:'{"text":"Submit","italic":false}'}}},{Slot:10b,id:"minecraft:clock",Count:1b,tag:{keypad_id:0,CustomModelData:0,keypad_item:1,display:{Name:'{"text":"0","italic":false}'}}},{Slot:11b,id:"minecraft:clock",Count:1b,tag:{keypad_id:4,CustomModelData:4,keypad_item:1,display:{Name:'{"text":"4","italic":false}'}}},{Slot:12b,id:"minecraft:clock",Count:1b,tag:{keypad_id:5,CustomModelData:5,keypad_item:1,display:{Name:'{"text":"5","italic":false}'}}},{Slot:13b,id:"minecraft:clock",Count:1b,tag:{keypad_id:6,CustomModelData:6,keypad_item:1,display:{Name:'{"text":"6","italic":false}'}}},{Slot:15b,id:"minecraft:clock",Count:1b,tag:{keypad_id:11,CustomModelData:11,keypad_item:1,display:{Name:'{"text":"Remove","italic":false}'}}},{Slot:20b,id:"minecraft:clock",Count:1b,tag:{keypad_id:7,CustomModelData:7,keypad_item:1,display:{Name:'{"text":"7","italic":false}'}}},{Slot:21b,id:"minecraft:clock",Count:1b,tag:{keypad_id:8,CustomModelData:8,keypad_item:1,display:{Name:'{"text":"8","italic":false}'}}},{Slot:22b,id:"minecraft:clock",Count:1b,tag:{keypad_id:9,CustomModelData:9,keypad_item:1,display:{Name:'{"text":"9","italic":false}'}}},{Slot:24b,id:"minecraft:clock",Count:1b,tag:{keypad_id:10,CustomModelData:10,keypad_item:1,display:{Name:'{"text":"Clear","italic":false}'}}}]}
execute if score $cardinal_direction keypad.main matches 3 at @s run setblock ~ ~ ~ minecraft:barrel[facing=west,open=false]{CustomName:'{"extra":[{"translate":"space.-8"},{"color":"white","font":"keypad:keypad_ui","text":"睷"}],"text":""}',Items:[{Slot:2b,id:"minecraft:clock",Count:1b,tag:{keypad_id:1,CustomModelData:1,keypad_item:1,display:{Name:'{"text":"1","italic":false}'}}},{Slot:3b,id:"minecraft:clock",Count:1b,tag:{keypad_id:2,CustomModelData:2,keypad_item:1,display:{Name:'{"text":"2","italic":false}'}}},{Slot:4b,id:"minecraft:clock",Count:1b,tag:{keypad_id:3,CustomModelData:3,keypad_item:1,display:{Name:'{"text":"3","italic":false}'}}},{Slot:6b,id:"minecraft:clock",Count:1b,tag:{keypad_id:12,CustomModelData:12,keypad_item:1,display:{Name:'{"text":"Submit","italic":false}'}}},{Slot:10b,id:"minecraft:clock",Count:1b,tag:{keypad_id:0,CustomModelData:0,keypad_item:1,display:{Name:'{"text":"0","italic":false}'}}},{Slot:11b,id:"minecraft:clock",Count:1b,tag:{keypad_id:4,CustomModelData:4,keypad_item:1,display:{Name:'{"text":"4","italic":false}'}}},{Slot:12b,id:"minecraft:clock",Count:1b,tag:{keypad_id:5,CustomModelData:5,keypad_item:1,display:{Name:'{"text":"5","italic":false}'}}},{Slot:13b,id:"minecraft:clock",Count:1b,tag:{keypad_id:6,CustomModelData:6,keypad_item:1,display:{Name:'{"text":"6","italic":false}'}}},{Slot:15b,id:"minecraft:clock",Count:1b,tag:{keypad_id:11,CustomModelData:11,keypad_item:1,display:{Name:'{"text":"Remove","italic":false}'}}},{Slot:20b,id:"minecraft:clock",Count:1b,tag:{keypad_id:7,CustomModelData:7,keypad_item:1,display:{Name:'{"text":"7","italic":false}'}}},{Slot:21b,id:"minecraft:clock",Count:1b,tag:{keypad_id:8,CustomModelData:8,keypad_item:1,display:{Name:'{"text":"8","italic":false}'}}},{Slot:22b,id:"minecraft:clock",Count:1b,tag:{keypad_id:9,CustomModelData:9,keypad_item:1,display:{Name:'{"text":"9","italic":false}'}}},{Slot:24b,id:"minecraft:clock",Count:1b,tag:{keypad_id:10,CustomModelData:10,keypad_item:1,display:{Name:'{"text":"Clear","italic":false}'}}}]}
execute at @s align xyz run summon minecraft:area_effect_cloud ~0.5 ~0.5 ~0.5 {Tags:["keypad", "keypad.pad", "uninitialized", "keypad.active_install"],Age:-2147483648,Duration:-1,WaitTime:-2147483648}
scoreboard players operation @e[tag=uninitialized] keypad.id_pad = $available_id keypad.main
tag @e remove uninitialized
tellraw @s ["", {"text": "Created keypad pad with ID of (", "color": "green"}, {"score": {"name": "$available_id", "objective": "keypad.main"}}, {"text":")", "color": "green"}]
tellraw @s {"text": "Set \"$set_code keypad.main\" to the desired passcode and run this function again", "color": "green"}